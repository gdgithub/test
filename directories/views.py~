
from django.http import HttpResponse
from directories.models import *
import json
import copy


def getTable(table):
    row = dict()
    tb = []

    for records in table:
        for field_name in [x.name for x in table.model()._meta.get_fields()]:
            row[field_name] = getattr(records, field_name)
        tb.append(copy.deepcopy(row))
        row = dict()

    return tb
# Create your views here.

def getAll(request):

    data = list(contacts.objects.values())

    return HttpResponse(json.dumps(data))


def create(request):

    if request.method == "POST":
        name = request.POST['name']
        address = request.POST['address']

        contacts.objects.create(
            name=name,
            phone="00",
            address=address,
            category_id=0
        )

    return HttpResponse('Informacion almacenada exitosamente.')


def getContactBranches(request):
	if request.method == "POST":
        contactId = request.POST['contactId']

        branch.objects.filter(contactId=contactId)

    return HttpResponse('Informacion almacenada exitosamente.')
